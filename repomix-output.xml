This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
components/
  InputForm.tsx
  ScenarioView.tsx
services/
  geminiService.ts
.gitignore
App.tsx
index.html
index.tsx
metadata.json
package.json
README.md
tsconfig.json
types.ts
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="index.html">
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DuoScript AI - ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Noto Sans KR', 'Roboto', sans-serif;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.1/",
    "react": "https://aistudiocdn.com/react@^19.2.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.1/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.31.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
  <body class="bg-slate-50 text-slate-900 antialiased min-h-screen">
    <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>
</file>

<file path="index.tsx">
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error("Could not find root element to mount to");
}

const root = ReactDOM.createRoot(rootElement);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
</file>

<file path="metadata.json">
{
  "name": "DuoScript AI",
  "description": "A dual-language scenario generator that creates detailed screenplays in Korean and English based on character and plot inputs.",
  "requestFramePermissions": []
}
</file>

<file path="README.md">
<div align="center">
<img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />
</div>

# Run and deploy your AI Studio app

This contains everything you need to run your app locally.

View your app in AI Studio: https://ai.studio/apps/drive/1fOg8hGOP8hbf9fGfvvGSgMHYfvuoCwjj

## Run Locally

**Prerequisites:**  Node.js


1. Install dependencies:
   `npm install`
2. Set the `GEMINI_API_KEY` in [.env.local](.env.local) to your Gemini API key
3. Run the app:
   `npm run dev`
# duoscript-ai
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2022",
    "experimentalDecorators": true,
    "useDefineForClassFields": false,
    "module": "ESNext",
    "lib": [
      "ES2022",
      "DOM",
      "DOM.Iterable"
    ],
    "skipLibCheck": true,
    "types": [
      "node"
    ],
    "moduleResolution": "bundler",
    "isolatedModules": true,
    "moduleDetection": "force",
    "allowJs": true,
    "jsx": "react-jsx",
    "paths": {
      "@/*": [
        "./*"
      ]
    },
    "allowImportingTsExtensions": true,
    "noEmit": true
  }
}
</file>

<file path="vite.config.ts">
import path from 'path';
import { defineConfig, loadEnv } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig(({ mode }) => {
    const env = loadEnv(mode, '.', '');
    return {
      server: {
        port: 3000,
        host: '0.0.0.0',
      },
      plugins: [react()],
      define: {
        'process.env.API_KEY': JSON.stringify(env.GEMINI_API_KEY),
        'process.env.GEMINI_API_KEY': JSON.stringify(env.GEMINI_API_KEY)
      },
      resolve: {
        alias: {
          '@': path.resolve(__dirname, '.'),
        }
      }
    };
});
</file>

<file path="package.json">
{
  "name": "duoscript-ai",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@google/genai": "^1.31.0",
    "react": "^19.2.1",
    "react-dom": "^19.2.1",
    "repomix": "^1.9.2"
  },
  "devDependencies": {
    "@types/node": "^22.14.0",
    "@vitejs/plugin-react": "^5.0.0",
    "typescript": "~5.8.2",
    "vite": "^6.2.0"
  },
  "packageManager": "pnpm@10.12.1+sha512.f0dda8580f0ee9481c5c79a1d927b9164f2c478e90992ad268bbb2465a736984391d6333d2c327913578b2804af33474ca554ba29c04a8b13060a717675ae3ac"
}
</file>

<file path="components/ScenarioView.tsx">
import React, { useState } from 'react';
import { DualScenarioResponse, ScenarioDetail, Scene } from '../types';

interface ScenarioViewProps {
  data: DualScenarioResponse;
}

const formatSceneText = (data: ScenarioDetail, scene: Scene, isKo: boolean) => {
  if (isKo) {
    return `ì œëª©: "${data.title}"
ì¥ë¥´: ${data.genre}
ë§¤ì²´ ìŠ¤íƒ€ì¼: ${data.mediaStyle}
ì£¼ì¸ê³µ:

ì´ë¦„: ${data.protagonist.name}

íŠ¹ì§•: ${data.protagonist.features}

ì‹œë†‰ì‹œìŠ¤

${data.synopsis}

ì‹œë‚˜ë¦¬ì˜¤
ì¥ë©´ ${scene.scene_number}: ${scene.title}

ì‹œê°: ${scene.time}

ì•¡ì…˜: ${scene.action}

ê°ì •: ${scene.emotion}

ì‹œê°ì  í¬ì¸íŠ¸(ë§¤ì²´ ìŠ¤íƒ€ì¼ ë°˜ì˜): ${scene.visual_point}

ì‚¬ìš´ë“œ: ${scene.sound}`;
  } else {
    return `Title: "${data.title}"
Genre: ${data.genre}
Media Style: ${data.mediaStyle}
Protagonist:

Name: ${data.protagonist.name}

Features: ${data.protagonist.features}

Synopsis

${data.synopsis}

Scenario
Scene ${scene.scene_number}: ${scene.title}

Time: ${scene.time}

Action: ${scene.action}

Emotion: ${scene.emotion}

Visual Point (Media Style Applied): ${scene.visual_point}

Sound: ${scene.sound}`;
  }
};

const SceneCell: React.FC<{ scene: Scene; data: ScenarioDetail; isKo: boolean }> = ({ scene, data, isKo }) => {
  const [copied, setCopied] = useState(false);

  const handleCopy = () => {
    const text = formatSceneText(data, scene, isKo);
    navigator.clipboard.writeText(text).then(() => {
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    });
  };

  return (
    <div className={`h-full p-6 ${isKo ? 'bg-white' : 'bg-slate-50/50'}`}>
      <div className="flex justify-between items-start mb-4">
        <div>
          <h4 className="font-bold text-indigo-900 text-lg leading-tight">
            {isKo ? `ì¥ë©´ ${scene.scene_number}` : `Scene ${scene.scene_number}`}: {scene.title}
          </h4>
          <p className="text-xs text-slate-500 font-mono uppercase mt-1.5 tracking-wide flex items-center gap-1">
            <svg className="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            {scene.time}
          </p>
        </div>
        <button
          onClick={handleCopy}
          className={`shrink-0 flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold transition-all shadow-sm border
            ${copied
              ? 'bg-green-100 text-green-700 border-green-200'
              : 'bg-white text-slate-600 border-slate-200 hover:border-indigo-300 hover:text-indigo-600'
            }`}
          title={isKo ? "ì¥ë©´ ë° ì„¤ì • ë³µì‚¬" : "Copy Scene & Settings"}
        >
          {copied ? (
            <>
              <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7" />
              </svg>
              {isKo ? "ì™„ë£Œ" : "Done"}
            </>
          ) : (
            <>
              <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
              </svg>
              {isKo ? "ë³µì‚¬" : "Copy"}
            </>
          )}
        </button>
      </div>

      <div className="space-y-4 text-sm">
        <div>
          <span className="font-bold text-slate-700 block mb-1.5 text-xs uppercase tracking-wider">{isKo ? 'ì•¡ì…˜ (Action)' : 'Action'}</span>
          <p className="text-slate-700 leading-relaxed text-[15px]">{scene.action}</p>
        </div>

        <div className="grid grid-cols-1 gap-3 pt-3 border-t border-slate-200/60 mt-4">
          <div>
            <span className="font-bold text-slate-700 text-xs uppercase tracking-wider block mb-1">{isKo ? 'ê°ì • (Emotion)' : 'Emotion'}</span>
            <span className="text-slate-600 italic block">{scene.emotion}</span>
          </div>
          <div>
            <span className="font-bold text-slate-700 text-xs uppercase tracking-wider block mb-1">{isKo ? 'ì‹œê°ì  í¬ì¸íŠ¸ (Visual)' : 'Visual Point'}</span>
            <span className="text-slate-600 block">{scene.visual_point}</span>
          </div>
          <div>
            <span className="font-bold text-slate-700 text-xs uppercase tracking-wider block mb-1">{isKo ? 'ì‚¬ìš´ë“œ (Sound)' : 'Sound'}</span>
            <span className="text-slate-600 block">{scene.sound}</span>
          </div>
        </div>
      </div>
    </div>
  );
};

export const ScenarioView: React.FC<ScenarioViewProps & { scenarioLanguage?: string }> = ({ data, scenarioLanguage }) => {
  return (
    <div className="w-full space-y-8 pb-12">

      {/* ì–¸ì–´ ì„¤ì •ê°’ í‘œì‹œ */}
      <div className="mb-4">
        <span className="inline-block bg-blue-50 text-blue-700 px-3 py-1 rounded-md text-sm font-semibold border border-blue-100">
          ì–¸ì–´: {scenarioLanguage || 'í•œê¸€'}
        </span>
      </div>

      {/* 1. Basic Info Section */}
      <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
        {/* Header: Title & Genre */}
        <div className="grid grid-cols-1 lg:grid-cols-2 border-b border-slate-200">
          <div className="p-6 border-b lg:border-b-0 lg:border-r border-slate-200">
            <span className="block text-xs font-extrabold text-slate-400 uppercase tracking-widest mb-1">Korean</span>
            <h2 className="text-2xl font-bold text-slate-800 mb-2">{data.ko.title}</h2>
            <div className="space-x-2">
              <span className="inline-block bg-indigo-50 text-indigo-700 px-2.5 py-1 rounded-md text-sm font-medium border border-indigo-100">
                {data.ko.genre}
              </span>
              <span className="inline-block bg-indigo-50 text-indigo-700 px-2.5 py-1 rounded-md text-sm font-medium border border-indigo-100">
                {data.ko.mediaStyle}
              </span>
            </div>
          </div>
          <div className="p-6 bg-slate-50/50">
            <span className="block text-xs font-extrabold text-slate-400 uppercase tracking-widest mb-1">English</span>
            <h2 className="text-2xl font-bold text-slate-800 mb-2">{data.en.title}</h2>
            <div className="space-x-2">
              <span className="inline-block bg-indigo-50 text-indigo-700 px-2.5 py-1 rounded-md text-sm font-medium border border-indigo-100">
                {data.en.genre}
              </span>
              <span className="inline-block bg-indigo-50 text-indigo-700 px-2.5 py-1 rounded-md text-sm font-medium border border-indigo-100">
                {data.en.mediaStyle}
              </span>
            </div>
          </div>
        </div>

        {/* Protagonist */}
        <div className="grid grid-cols-1 lg:grid-cols-2 border-b border-slate-200">
          <div className="p-6 border-b lg:border-b-0 lg:border-r border-slate-200">
            <h3 className="text-sm font-bold text-slate-800 mb-3 flex items-center gap-2">
              <span className="w-1.5 h-1.5 rounded-full bg-indigo-500"></span> ì£¼ì¸ê³µ
            </h3>
            <div className="bg-slate-50 p-4 rounded-lg border border-slate-100">
              <p className="font-bold text-slate-700 mb-1">{data.ko.protagonist.name}</p>
              <p className="text-slate-600 text-sm leading-relaxed">{data.ko.protagonist.features}</p>
            </div>
          </div>
          <div className="p-6 bg-slate-50/50">
            <h3 className="text-sm font-bold text-slate-800 mb-3 flex items-center gap-2">
              <span className="w-1.5 h-1.5 rounded-full bg-indigo-500"></span> Protagonist
            </h3>
            <div className="bg-white p-4 rounded-lg border border-slate-200">
              <p className="font-bold text-slate-700 mb-1">{data.en.protagonist.name}</p>
              <p className="text-slate-600 text-sm leading-relaxed">{data.en.protagonist.features}</p>
            </div>
          </div>
        </div>

        {/* Synopsis */}
        <div className="grid grid-cols-1 lg:grid-cols-2">
          <div className="p-6 border-b lg:border-b-0 lg:border-r border-slate-200">
            <h3 className="text-sm font-bold text-slate-800 mb-3 flex items-center gap-2">
              <span className="w-1.5 h-1.5 rounded-full bg-indigo-500"></span> ì‹œë†‰ì‹œìŠ¤
            </h3>
            <p className="text-slate-700 text-sm leading-relaxed whitespace-pre-line">{data.ko.synopsis}</p>
          </div>
          <div className="p-6 bg-slate-50/50">
            <h3 className="text-sm font-bold text-slate-800 mb-3 flex items-center gap-2">
              <span className="w-1.5 h-1.5 rounded-full bg-indigo-500"></span> Synopsis
            </h3>
            <p className="text-slate-700 text-sm leading-relaxed whitespace-pre-line">{data.en.synopsis}</p>
          </div>
        </div>
      </div>

      {/* 2. Scenes List */}
      <div>
        <div className="flex items-center gap-3 mb-6">
          <span className="text-3xl">ğŸ¬</span>
          <h3 className="text-2xl font-bold text-slate-800">
            ì‹œë‚˜ë¦¬ì˜¤ <span className="text-slate-400 font-normal text-lg ml-1">Scenario</span>
          </h3>
        </div>

        <div className="space-y-6">
          {data.ko.scenes.map((sceneKo, idx) => {
            const sceneEn = data.en.scenes[idx];
            return (
              <div key={sceneKo.scene_number} className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                <div className="grid grid-cols-1 lg:grid-cols-2 divide-y lg:divide-y-0 lg:divide-x divide-slate-200">
                  {/* Korean Scene */}
                  <SceneCell scene={sceneKo} data={data.ko} isKo={true} />
                  {/* English Scene */}
                  <SceneCell scene={sceneEn} data={data.en} isKo={false} />
                </div>
              </div>
            );
          })}
        </div>
      </div>

    </div>
  );
};
</file>

<file path="App.tsx">
import React, { useState, useRef, useEffect } from 'react';
import { InputForm } from './components/InputForm';
import { ScenarioView } from './components/ScenarioView';
import { generateScenario } from './services/geminiService';
import { DualScenarioResponse, UserInput, Scene } from './types';

function App() {
  const [data, setData] = useState<DualScenarioResponse | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const scenarioRef = useRef<HTMLDivElement>(null);

  const handleGenerate = async (input: UserInput) => {
    console.log('Input received:', input); // Debugging line to verify input
    setLoading(true);
    setError(null);
    setData(null);

    try {
      // scenarioConcept propì´ í¬í•¨ëœ inputì„ ê·¸ëŒ€ë¡œ ì „ë‹¬
      const result = await generateScenario(input);
      setData(result);
    } catch (err) {
      setError("ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒì„±í•˜ëŠ” ë„ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
      console.error(err);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    if (data && scenarioRef.current) {
      scenarioRef.current.scrollIntoView({ behavior: 'smooth' });
    }
  }, [data]);

 const formatTextForCopyKo = (scenario: DualScenarioResponse, scenarioLanguage?: string) => {
  const ko = scenario.ko;
  let text = `ì œëª©: "${ko.title}"\n`;
  text += `ì¥ë¥´: ${ko.genre}\n`;
  text += `ë§¤ì²´ ìŠ¤íƒ€ì¼: ${ko.mediaStyle}\n`;
  text += `ì–¸ì–´: ${scenarioLanguage || 'í•œê¸€'}\n`;
  text += `ì£¼ì¸ê³µ:\n\n`;
  text += `ì´ë¦„: ${ko.protagonist.name}\n\n`;
  text += `íŠ¹ì§•: ${ko.protagonist.features}\n\n`;
  text += `ì‹œë†‰ì‹œìŠ¤\n\n${ko.synopsis}\n\n`;
  text += `ì‹œë‚˜ë¦¬ì˜¤\n`;
  ko.scenes.forEach((scene: Scene) => {
    text += `ì¥ë©´ ${scene.scene_number}: ${scene.title}\n\n`;
    text += `ì‹œê°: ${scene.time}\n\n`;
    text += `ì•¡ì…˜: ${scene.action}\n\n`;
    text += `ê°ì •: ${scene.emotion}\n\n`;
    text += `ì‹œê°ì  í¬ì¸íŠ¸: ${scene.visual_point}\n\n`;
    text += `ì‚¬ìš´ë“œ: ${scene.sound}\n\n`;
  });
  return text;
};

const formatTextForCopyEn = (scenario: DualScenarioResponse, scenarioLanguage?: string) => {
  const en = scenario.en;
  let text = `Title: "${en.title}"\n`;
  text += `Genre: ${en.genre}\n`;
  text += `Media Style: ${en.mediaStyle}\n`;
  text += `Scenario Language: ${scenarioLanguage || 'English'}\n`;
  text += `Protagonist:\n\n`;
  text += `Name: ${en.protagonist.name}\n\n`;
  text += `Features: ${en.protagonist.features}\n\n`;
  text += `Synopsis\n\n${en.synopsis}\n\n`;
  text += `Scenario\n`;
  en.scenes.forEach((scene: Scene) => {
    text += `Scene ${scene.scene_number}: ${scene.title}\n\n`;
    text += `Time: ${scene.time}\n\n`;
    text += `Action: ${scene.action}\n\n`;
    text += `Emotion: ${scene.emotion}\n\n`;
    text += `Visual Point: ${scene.visual_point}\n\n`;
    text += `Sound: ${scene.sound}\n\n`;
  });
  return text;
};

  const handleCopyKo = () => {
    if (!data) return;
    // ì–¸ì–´ ì •ë³´ ì¶”ì¶œ (í•œê¸€)
    const scenarioLanguage = 'í•œê¸€';
    const text = formatTextForCopyKo(data, scenarioLanguage);
    navigator.clipboard.writeText(text).then(() => {
      alert("í•œê¸€ ì‹œë‚˜ë¦¬ì˜¤ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
    }).catch(err => {
      console.error("ë³µì‚¬ ì‹¤íŒ¨:", err);
    });
  };

  const handleCopyEn = () => {
    if (!data) return;
    // ì–¸ì–´ ì •ë³´ ì¶”ì¶œ (ì˜ì–´)
    const scenarioLanguage = 'English';
    const text = formatTextForCopyEn(data, scenarioLanguage);
    navigator.clipboard.writeText(text).then(() => {
      alert("English scenario copied to clipboard!");
    }).catch(err => {
      console.error("Copy failed:", err);
    });
  };

  return (
    <div className="min-h-screen bg-slate-50 text-slate-900 pb-24">
      {/* Header */}
      <header className="bg-white border-b border-slate-200 sticky top-0 z-10 shadow-sm">
        <div className="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
          <div className="flex items-center gap-2">
            <span className="text-2xl">ğŸ¬</span>
            <h1 className="text-xl font-bold bg-gradient-to-r from-indigo-600 to-violet-600 bg-clip-text text-transparent">
              DuoScript AI
            </h1>
          </div>
          <div className="text-sm text-slate-500 hidden sm:block font-medium">
            í•œ/ì˜ ì‹œë‚˜ë¦¬ì˜¤ ìë™ ìƒì„±ê¸°
          </div>
        </div>
      </header>

      <main className="max-w-6xl mx-auto px-4 py-8">
        
        {/* Intro Text */}
        <div className="text-center mb-12 py-12">
          <h2 className="text-4xl font-extrabold text-slate-800 mb-6 leading-tight">
            ìƒìƒë§Œ í•˜ì„¸ìš”, <br className="sm:hidden" />ëŒ€ë³¸ì€ AIê°€ ì”ë‹ˆë‹¤.
          </h2>
          <p className="text-lg text-slate-600 max-w-2xl mx-auto leading-relaxed">
            ìºë¦­í„° ì„¤ì •ê³¼ ê°„ë‹¨í•œ ì¤„ê±°ë¦¬ë§Œ ì…ë ¥í•˜ë©´, <br className="hidden sm:block"/> 
            ì¥ë©´ë³„ ìƒì„¸ ë¬˜ì‚¬ê°€ í¬í•¨ëœ ì „ë¬¸ì ì¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ <span className="text-indigo-600 font-bold">í•œê¸€ê³¼ ì˜ì–´</span>ë¡œ ë™ì‹œì— ì‘ì„±í•´ë“œë¦½ë‹ˆë‹¤.
          </p>
        </div>

        {/* Input Form */}
        <div className="mb-12">
            <InputForm onSubmit={handleGenerate} isLoading={loading} />
        </div>

        {/* Error Message */}
        {error && (
          <div className="bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg mb-8 text-center shadow-sm" role="alert">
            <strong className="font-bold block mb-1">ì˜¤ë¥˜ ë°œìƒ</strong>
            <span className="block sm:inline">{error}</span>
          </div>
        )}

        {/* Results */}
        {data && (
          <div ref={scenarioRef} className="animate-fade-in-up">
            <div className="flex items-center justify-between mb-6 border-b pb-4 border-slate-200">
              <h3 className="text-2xl font-bold text-slate-800 flex items-center gap-2">
                <span className="w-2 h-8 bg-indigo-600 rounded-full"></span>
                ì™„ì„±ëœ ì‹œë‚˜ë¦¬ì˜¤
              </h3>
              <div className="flex gap-2">
                <button
                  onClick={handleCopyKo}
                  className="text-sm font-semibold text-indigo-600 hover:text-indigo-800 flex items-center gap-1 px-3 py-2 rounded-lg hover:bg-indigo-50 transition-colors"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                  </svg>
                  í•œê¸€ ë³µì‚¬
                </button>
                <button
                  onClick={handleCopyEn}
                  className="text-sm font-semibold text-violet-600 hover:text-violet-800 flex items-center gap-1 px-3 py-2 rounded-lg hover:bg-violet-50 transition-colors"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                  </svg>
                  ì˜ì–´ ë³µì‚¬
                </button>
              </div>
            </div>
            
            <ScenarioView data={data} />
          </div>
        )}
      </main>

      {/* Floating Copy Button Removed in favor of scene-specific copy and header global copy */}
    </div>
  );
}

export default App;
</file>

<file path="types.ts">
export interface Protagonist {
  name: string;
  features: string;
}

export interface Scene {
  scene_number: number;
  title: string;
  time: string;
  action: string;
  visual_point: string;
  sound: string;
  emotion: string;
}

export interface ScenarioDetail {
  title: string;
  genre: string;
  mediaStyle: string;
  protagonist: Protagonist;
  synopsis: string;
  scenes: Scene[];
}

export interface DualScenarioResponse {
  ko: ScenarioDetail;
  en: ScenarioDetail;
}

// animationType: ì˜ˆì‹œ) ìºë¦­í„°, ì‹¤ì œí˜„ì‹¤, íŒíƒ€ì§€, ë‹¤íë©˜í„°ë¦¬ ë“±
// scenarioType: ì˜ˆì‹œ) ìºë¦­í„°, ì‹¤ì œí˜„ì‹¤, íŒíƒ€ì§€, ë‹¤íë©˜í„°ë¦¬ ë“±
export interface UserInput {
  characterConfig: string;
  scenarioConfig: string;
  scenarioType?: string; // ì‹œë‚˜ë¦¬ì˜¤ ìœ í˜•(ì˜ˆ: ìºë¦­í„°, ì‹¤ì œí˜„ì‹¤, íŒíƒ€ì§€ ë“±)
  style?: string; // ë§¤ì²´ ìŠ¤íƒ€ì¼(ì˜ˆ: ì• ë‹ˆë©”ì´ì…˜, ì‹¤ì‚¬, ì›¹íˆ° ë“±)
  scenarioLanguage?: string; // ì–¸ì–´(ì˜ˆ: í•œê¸€, ì˜ì–´)
  scenarioConcept?: string; // ì»¨ì…‰(ì˜ˆ: ê·€ì—¬ì›€, ë¯¸ë˜ì§€í–¥ ë“±)
}
</file>

<file path="services/geminiService.ts">
import { GoogleGenAI, Type, Schema } from "@google/genai";
import { UserInput, DualScenarioResponse } from "../types";

const apiKey = process.env.API_KEY;

if (!apiKey) {
  console.error("API_KEY is missing from environment variables.");
}

const ai = new GoogleGenAI({ apiKey: apiKey || "" });

const sceneSchema: Schema = {
  type: Type.OBJECT,
  properties: {
    scene_number: { type: Type.INTEGER },
    title: { type: Type.STRING },
    time: { type: Type.STRING },
    action: { type: Type.STRING },
    visual_point: { type: Type.STRING },
    sound: { type: Type.STRING },
    emotion: { type: Type.STRING },
  },
  required: ["scene_number", "title", "time", "action", "visual_point", "sound", "emotion"],
};

const scenarioDetailSchema: Schema = {
  type: Type.OBJECT,
  properties: {
    title: { type: Type.STRING },
    genre: { type: Type.STRING },
    mediaStyle: { type: Type.STRING }, // ë§¤ì²´ ìŠ¤íƒ€ì¼ í•„ë“œ ì¶”ê°€
    protagonist: {
      type: Type.OBJECT,
      properties: {
        name: { type: Type.STRING },
        features: { type: Type.STRING },
      },
      required: ["name", "features"],
    },
    synopsis: { type: Type.STRING },
    scenes: {
      type: Type.ARRAY,
      items: sceneSchema,
    },
  },
  required: ["title", "genre", "mediaStyle", "protagonist", "synopsis", "scenes"], // mediaStyleë„ í•„ìˆ˜ë¡œ ì§€ì •
};

const responseSchema: Schema = {
  type: Type.OBJECT,
  properties: {
    ko: scenarioDetailSchema,
    en: scenarioDetailSchema,
  },
  required: ["ko", "en"],
};

export const generateScenario = async (input: UserInput): Promise<DualScenarioResponse> => {
  const modelId = "gemini-2.5-flash"; // Using flash for faster text generation

  const prompt = `
    You are a professional screenwriter assistant.
    Generate a creative screenplay draft based on the user's input.

    **The most important element is the Scenario Concept (ì»¨ì…‰)!**
    - The Scenario Concept determines the overall mood, style, and direction of the entire scenario. It must be reflected in every scene, action, emotion, and visual description.
    - Always prioritize the Scenario Concept above all other inputs. All creative choices, details, and atmosphere should be strongly influenced by this concept.

    The user will provide the following information:
    1. Scenario Type: What is the main subject or theme? (e.g., real world, character, fantasy, documentary, etc.)
    2. Media Style: What is the format or style? (e.g., animation, live-action, webtoon, play, etc.)
    3. Character Settings: Describe the protagonist or main characters. (e.g., a calendar in December 2025 with emotions, reflecting on its meaning at the end of the year)
    4. Scenario Context: Storyline or situation. (e.g., a calendar searching for its purpose at the end of the year)
    5. Scenario Language: Which language should the scenario be written in? (Korean or English)
    6. Scenario Concept: The overall concept or mood in one word (e.g., cute, futuristic, dreamy, dark and serious, etc.)

    Inputs:
    1. Scenario Type: ${input.scenarioType || "(No specific scenario type provided. Use your creativity. Examples: real world, character, fantasy, documentary, etc.)"}
    2. Media Style: ${input.style || "(No specific media style provided. Use your creativity. Examples: animation, live-action, webtoon, play, etc.)"}
    3. Character Settings: ${input.characterConfig}
    4. Scenario Context: ${input.scenarioConfig || "Create a suitable story based on the character."}
    5. Scenario Language: ${input.scenarioLanguage || "í•œê¸€"}
    6. Scenario Concept: ${input.scenarioConcept || "(No specific concept provided. Use your creativity. Examples: cute, futuristic, dreamy, dark and serious, etc.)"}

    Style Enforcement:
    - The style and visual description of the scenario must match the user's selected "Media Style".
    - If Media Style is "2D ì• ë‹ˆë©”ì´ì…˜" or similar, use 2D cel-shaded animation style with hand-drawn outlines, flat color shading, and line-art details. Avoid any photorealistic or live-action elements. Use signals such as "cel-shaded", "hand-drawn", "flat colors", "limited color palette", "2D line art", "not photorealistic", "NOT live-action" in every scene description.
    - If Media Style is "ì‹¤ì‚¬" or similar, describe scenes in realistic live-action style, with natural lighting, realistic textures, and cinematic details. Avoid cartoon or animation signals.
    - If Media Style is "ì›¹íˆ°" or similar, describe scenes in webtoon style, with comic panel layouts, bold outlines, vibrant colors, and stylized backgrounds. Avoid photorealistic or animation signals.
    - If Media Style is "3D ì• ë‹ˆë©”ì´ì…˜" or similar, describe scenes in 3D animation style, with depth, shading, and realistic or stylized 3D elements.
    - For other styles, adapt the visual and descriptive language to match the selected media style.
    - Every scene's "visual_point" and "action" must reinforce the selected media style, and never use signals from other styles.

    Requirements:
    - The scenario concept must be the main driver for all creative decisions. Every scene, action, emotion, and visual must clearly reflect the concept.
    - The scenario type, media style, and scenario language should all influence the overall tone, style, and logic of the screenplay. If any is not provided, use your best judgment.
    - The protagonist (main character) does NOT have to be a human. It can be an object, animal, concept, or anything the user sets.
    - The protagonist's "features" field must include a detailed description of their appearance, clothing, and cultural traits, appropriate for the selected language and culture. For example, if Korean, describe Korean-style design, colors, and cultural signals. If English, describe Western-style design, colors, and cultural signals.
    - Structure the output exactly according to the JSON schema provided.
    - Include at least 5 scenes.
    - "visual_point" should describe lighting, colors, or specific visual details, and must always reflect the selected Media Style. For example, if the style is "ì‹¤ì‚¬", describe realistic lighting, textures, and cinematic details. If the style is "2D ì• ë‹ˆë©”ì´ì…˜", describe hand-drawn, cel-shaded visuals. If the style is "ì›¹íˆ°", describe comic-style visuals. If the style is "3D ì• ë‹ˆë©”ì´ì…˜", describe 3D rendered visuals. Do not mix signals from other styles.
    - "emotion" should describe the main character's feelings, thoughts, or relevant state in that scene (even if the character is not human).

    Language Output Instructions:
    - If Scenario Language is "í•œê¸€" or "í•œêµ­ì–´", generate only the Korean version (ko). The protagonist's nationality, name, cultural background, appearance, clothing, and mannerisms should be Korean and reflect Korean culture.
    - If Scenario Language is "ì˜ì–´" or "English", generate only the English version (en). The protagonist's nationality, name, cultural background, appearance, clothing, and mannerisms should be foreign (e.g., American, British, etc.) and appropriate for the chosen language and culture.
    - If Scenario Language is "ë‘˜ ë‹¤", "both", or not specified, generate both Korean (ko) and English (en) versions. The Korean version should have a Korean protagonist, and the English version should have a foreign protagonist. The English version should be a translation of the Korean version, but adapt the protagonist's name, appearance, clothing, and cultural details to fit the language and culture.
  `;


  try {
    const response = await ai.models.generateContent({
      model: modelId,
      contents: prompt,
      config: {
        responseMimeType: "application/json",
        responseSchema: responseSchema,
        temperature: 0.7, 
      },
    });

    const text = response.text;
    if (!text) {
      throw new Error("No response from Gemini.");
    }

    return JSON.parse(text) as DualScenarioResponse;
  } catch (error) {
    console.error("Error generating scenario:", error);
    throw error;
  }
};
</file>

<file path="components/InputForm.tsx">
import React, { useState } from 'react';
import { UserInput } from '../types';

interface InputFormProps {
  onSubmit: (input: UserInput) => void;
  isLoading: boolean;
}


export const InputForm: React.FC<InputFormProps> = ({ onSubmit, isLoading }) => {
  const [characterConfig, setCharacterConfig] = useState('');
  const [scenarioConfig, setScenarioConfig] = useState('');
  // ì»¨ì…‰ ë¼ë””ì˜¤ ì˜µì…˜ ë° ê¸°íƒ€ ì…ë ¥
  const scenarioConceptOptions = [
    'ê·€ì—¬ì›€',
    'ë¯¸ë˜ì§€í–¥',
    'ëª½í™˜ì ',
    'ì–´ë‘¡ê³  ì§„ì§€í•¨',
    'ìœ ë¨¸ëŸ¬ìŠ¤',
    'ê°ë™ì ',
    'ë”°ëœ»í•¨',
    'ê¸°íƒ€'
  ];
  const [scenarioConcept, setScenarioConcept] = useState('ê·€ì—¬ì›€');
  const [customConcept, setCustomConcept] = useState('');
  const scenarioTypeOptions = [
    'ì‹¤ì œí˜„ì‹¤',
    'ìºë¦­í„°',
    'íŒíƒ€ì§€',
    'ë‹¤íë©˜í„°ë¦¬',
    'ì½”ë¯¸ë””',
    'ìŠ¤ë¦´ëŸ¬',
    'SF',
    'ë¡œë§¨ìŠ¤',
    'ê¸°íƒ€'
  ];
  const [scenarioType, setScenarioType] = useState('ì‹¤ì œí˜„ì‹¤');
  const [scenarioLanguage, setScenarioLanguage] = useState('í•œê¸€');
  const styleOptions = [
    '2D ì• ë‹ˆë©”ì´ì…˜',
    '3D ì• ë‹ˆë©”ì´ì…˜',
    'ì‹¤ì‚¬',
    'ì›¹íˆ°',
    'ì—°ê·¹',
    'ê¸°íƒ€'
  ];
  const [style, setStyle] = useState('2D ì• ë‹ˆë©”ì´ì…˜');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (!characterConfig.trim() || !scenarioType || !style || !scenarioLanguage) return;
    // ê¸°íƒ€ ì„ íƒ ì‹œ customConcept ì‚¬ìš©
    const conceptValue = scenarioConcept === 'ê¸°íƒ€' ? customConcept : scenarioConcept;
    onSubmit({ characterConfig, scenarioConfig, scenarioType, style, scenarioLanguage, scenarioConcept: conceptValue });
  };

  return (
    <form onSubmit={handleSubmit} className="bg-white rounded-xl shadow-sm border border-slate-200 p-6 w-full mb-8">
      <div className="space-y-6">
        {/* ì–¸ì–´ ì„¤ì • */}
        <div>
          <label className="block text-sm font-bold text-slate-700 mb-2">
            ì–¸ì–´ <span className="text-red-500 text-xs ml-1">(í•„ìˆ˜)</span>
          </label>
          <div className="text-xs text-slate-500 mb-2">ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì–´ë–¤ ì–¸ì–´ë¡œ ì‘ì„±í• ì§€ ì„ íƒí•˜ì„¸ìš”.</div>
          <div className="flex flex-wrap gap-3">
            {['í•œê¸€', 'ì˜ì–´'].map((lang) => (
              <label key={lang} className="flex items-center gap-2 cursor-pointer text-sm font-medium">
                <input
                  type="radio"
                  name="scenarioLanguage"
                  value={lang}
                  checked={scenarioLanguage === lang}
                  onChange={() => setScenarioLanguage(lang)}
                  required
                  disabled={isLoading}
                  className="accent-blue-600"
                />
                {lang}
              </label>
            ))}
          </div>
        </div>
        {/* ì»¨ì…‰ ë¼ë””ì˜¤ ì„ íƒ */}
        <div>
          <label className="block text-sm font-bold text-slate-700 mb-2">
            ì»¨ì…‰ <span className="text-red-500 text-xs ml-1">(í•„ìˆ˜)</span>
          </label>
          <div className="text-xs text-slate-500 mb-2">ì‹œë‚˜ë¦¬ì˜¤ì˜ ì „ì²´ì ì¸ ë¶„ìœ„ê¸°ë‚˜ ì»¨ì…‰ì„ í•œ ë‹¨ì–´ë¡œ ì„ íƒí•˜ê±°ë‚˜ ì§ì ‘ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
          <div className="flex flex-wrap gap-3 mb-2">
            {scenarioConceptOptions.map((opt) => (
              <label key={opt} className="flex items-center gap-2 cursor-pointer text-sm font-medium">
                <input
                  type="radio"
                  name="scenarioConcept"
                  value={opt}
                  checked={scenarioConcept === opt}
                  onChange={() => setScenarioConcept(opt)}
                  required
                  disabled={isLoading}
                  className="accent-indigo-600"
                />
                {opt}
              </label>
            ))}
          </div>
          {scenarioConcept === 'ê¸°íƒ€' && (
            <input
              type="text"
              value={customConcept}
              onChange={e => setCustomConcept(e.target.value)}
              placeholder="ì§ì ‘ ì…ë ¥"
              className="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
              disabled={isLoading}
            />
          )}
        </div>
        {/* ì‹œë‚˜ë¦¬ì˜¤ ìœ í˜• */}
        <div>
          <label className="block text-sm font-bold text-slate-700 mb-2">
            1. ì‹œë‚˜ë¦¬ì˜¤ ìœ í˜• <span className="text-red-500 text-xs ml-1">(í•„ìˆ˜)</span>
          </label>
          <div className="text-xs text-slate-500 mb-2">ë¬´ì—‡ì— ëŒ€í•œ ì´ì•¼ê¸°ì¸ê°€ìš”? (ì˜ˆ: ì‹¤ì œí˜„ì‹¤, ìºë¦­í„°, íŒíƒ€ì§€, ë‹¤íë©˜í„°ë¦¬ ë“±)</div>
          <div className="flex flex-wrap gap-3">
            {scenarioTypeOptions.map((opt) => (
              <label key={opt} className="flex items-center gap-2 cursor-pointer text-sm font-medium">
                <input
                  type="radio"
                  name="scenarioType"
                  value={opt}
                  checked={scenarioType === opt}
                  onChange={() => setScenarioType(opt)}
                  required
                  disabled={isLoading}
                  className="accent-indigo-600"
                />
                {opt}
              </label>
            ))}
          </div>
        </div>
        {/* ë§¤ì²´ ìŠ¤íƒ€ì¼ */}
        <div>
          <label className="block text-sm font-bold text-slate-700 mb-2">
            2. ë§¤ì²´ ìŠ¤íƒ€ì¼ <span className="text-red-500 text-xs ml-1">(í•„ìˆ˜)</span>
          </label>
          <div className="text-xs text-slate-500 mb-2">ì–´ë–¤ í˜•ì‹ìœ¼ë¡œ ë³´ì—¬ì¤„ê¹Œìš”?</div>
          <div className="flex flex-wrap gap-3">
            {styleOptions.map((opt) => (
              <label key={opt} className="flex items-center gap-2 cursor-pointer text-sm font-medium">
                <input
                  type="radio"
                  name="style"
                  value={opt}
                  checked={style === opt}
                  onChange={() => setStyle(opt)}
                  required
                  disabled={isLoading}
                  className="accent-violet-600"
                />
                {opt}
              </label>
            ))}
          </div>
        </div>
        {/* ìºë¦­í„° ì„¤ì • */}
        <div>
          <label htmlFor="character" className="block text-sm font-bold text-slate-700 mb-2">
            3. ìºë¦­í„° ì„¤ì • <span className="text-red-500 text-xs ml-1">(í•„ìˆ˜)</span>
          </label>
          <div className="text-xs text-slate-500 mb-2">ì£¼ì¸ê³µ/ë“±ì¥ì¸ë¬¼ì„ ì„¤ëª…í•´ ì£¼ì„¸ìš”.</div>
          <textarea
            id="character"
            value={characterConfig}
            onChange={(e) => setCharacterConfig(e.target.value)}
            placeholder="ì˜ˆ) 2025ë…„ 12ì›”ì„ ë§ì´í•œ ë‹¬ë ¥. ê°ì •ì´ ìˆëŠ” ì‚¬ë¬¼ë¡œ, í•œ í•´ì˜ ëìë½ì—ì„œ ìŠ¤ìŠ¤ë¡œì˜ ì˜ë¯¸ë¥¼ ê³ ë¯¼í•œë‹¤."
            className="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all min-h-[100px] text-sm resize-y"
            required
            disabled={isLoading}
          />
        </div>
        {/* ì‹œë‚˜ë¦¬ì˜¤ ë‚´ìš© */}
        <div>
          <label htmlFor="scenario" className="block text-sm font-bold text-slate-700 mb-2">
            4. ì‹œë‚˜ë¦¬ì˜¤ ë‚´ìš© <span className="text-slate-400 text-xs font-normal ml-1">(ì˜µì…˜)</span>
          </label>
          <div className="text-xs text-slate-500 mb-2">ì¤„ê±°ë¦¬/ìƒí™©ì„ ììœ ë¡­ê²Œ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
          <textarea
            id="scenario"
            value={scenarioConfig}
            onChange={(e) => setScenarioConfig(e.target.value)}
            placeholder="ì˜ˆ) ì—°ë§ì„ ë§ì•„ ë‹¬ë ¥ì´ ìŠ¤ìŠ¤ë¡œì˜ ì¡´ì¬ ì´ìœ ë¥¼ ì°¾ëŠ” ì—¬ì •ì„ ê·¸ë¦°ë‹¤."
            className="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all min-h-[80px] text-sm resize-y"
            disabled={isLoading}
          />
        </div>

        <button
          type="submit"
          disabled={isLoading || !characterConfig.trim()}
          className={`w-full py-3 px-6 rounded-lg text-white font-bold text-lg transition-all shadow-md
            ${isLoading 
              ? 'bg-slate-400 cursor-not-allowed' 
              : 'bg-indigo-600 hover:bg-indigo-700 hover:shadow-lg active:scale-[0.99]'
            }`}
        >
          {isLoading ? (
            <span className="flex items-center justify-center gap-2">
              <svg className="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              ì‘ê°€ë‹˜ì´ ì§‘í•„ì¤‘ì…ë‹ˆë‹¤...
            </span>
          ) : 'ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±í•˜ê¸°'}
        </button>
      </div>
    </form>
  );
};
</file>

</files>
